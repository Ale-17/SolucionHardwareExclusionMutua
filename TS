//EJEMPLO TRABAJO SOLUCIONES HARDWARE EXCLUSIÓN MUTUA
//ALEJANDRO GÓMEZ CASTELLANOS
//OBTENIDO DE https://www.geeksforgeeks.org/hardware-synchronization-algorithms-unlock-and-lock-test-and-set-swap/

//Shared variable lock initialized to false
boolean lock;

boolean TestAndSet (boolean &target){
    boolean rv = target;
    target = true;
    return rv;
}

while(1){
    while (TestAndSet(lock));
    critical section
    lock = false;
    remainder section
}
